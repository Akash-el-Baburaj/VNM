<app-page-title [breadcrumbItems]="pageTitle" title="Contact"></app-page-title>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-2">
                        <label class="form-label">Name</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Search Name"
                        (ngModelChange)="searchData($event, 'customerName')"
                        [(ngModel)]="searchFields.name"
                      />
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Phone</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Search Phone"
                        (ngModelChange)="searchData($event, 'phoneNumber')"
                        [(ngModel)]="searchFields.phone"
                      />
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Email</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Search Email"
                        (ngModelChange)="searchData($event, 'emailId')"
                        [(ngModel)]="searchFields.email"
                      />
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Marriage Anniversary</label>
                      <input
                        type="date"
                        class="form-control"
                        placeholder="Marriage Anniversary"
                        (ngModelChange)="searchData($event, 'marriageAnniversary')"
                        [(ngModel)]="searchFields.marriageAnniversary"
                      />
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Last Purchase Date</label>
                      <input
                        type="date"
                        class="form-control"
                        placeholder="Last Purchase Date"
                        (ngModelChange)="searchData($event, 'lastPurchaseDate')"
                        [(ngModel)]="searchFields.lastPurchaseDate"
                      />
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Religion</label>
                      <select
                        class="form-control"
                        (ngModelChange)="searchData($event, 'religion')"
                        [(ngModel)]="searchFields.religion"
                      >
                        <option value="">Select Religion</option>
                        <option *ngFor="let rel of uniqueReligions" [value]="rel">
                          {{ rel }}
                        </option>
                      </select>
                    </div>
                    <div class="col-md-4 mt-2">
                        <div class="d-flex align-items-end ">
                            <div class="h-100 me-2">
                                <button class="btn btn-primary" (click)="resetFilter()">Reset</button>
                            </div>
                        <!-- </div>
                        <div class="col-md-1 mt-3"> -->
                            <div class="h-100">
                                <button class="btn btn-primary" (click)="openModal(addCustomerModal)"><i class="mdi mdi-plus-circle-outline"></i> Add Customer</button>
                            </div>
                        </div>
                    </div>

                  </div>
                <!-- <h4 class="header-title">Select2</h4> -->
                <app-advanced-table [tableData]="records" [columns]="columns" [pagination]="true"
                    [pageSizeOptions]="pageSizeOptions" [hasRowSelection]="true" [isSearchable]="true"
                    [isSortable]="true" (sort)="onSort($event)"
                    tableClasses="table-striped">
                </app-advanced-table>
            </div>
        </div>
    </div>
</div>

<ng-template #addCustomerModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title">Add Customer</h5>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form #customerForm="ngForm" class="row" (ngSubmit)="addCustomer(customerForm.value); modal.close()">
        <div class="mb-3 col-md-6">
          <label for="customerName" class="form-label">Name</label>
          <input type="text" id="customerName" class="form-control" name="customerName" ngModel required />
        </div>
        <div class="mb-3 col-md-6">
          <label for="phoneNumber" class="form-label">Phone Number</label>
          <input type="text" id="phoneNumber" class="form-control" name="phoneNumber" ngModel required />
        </div>
        <div class="mb-3 col-md-6">
          <label for="emailId" class="form-label">Email ID</label>
          <input type="email" id="emailId" class="form-control" name="emailId" ngModel required />
        </div>
        <div class="mb-3 col-md-6">
          <label for="address" class="form-label">Address</label>
          <input type="text" id="address" class="form-control" name="address" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="area" class="form-label">Area</label>
          <input type="text" id="area" class="form-control" name="area" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="town" class="form-label">Town</label>
          <input type="text" id="town" class="form-control" name="town" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="pinCode" class="form-label">Pin Code</label>
          <input type="text" id="pinCode" class="form-control" name="pinCode" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="dateOfBirth" class="form-label">Date of Birth</label>
          <input type="date" id="dateOfBirth" class="form-control" name="dateOfBirth" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="marriageAnniversary" class="form-label">Marriage Anniversary</label>
          <input type="date" id="marriageAnniversary" class="form-control" name="marriageAnniversary" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="religion" class="form-label">Religion</label>
          <input type="text" id="religion" class="form-control" name="religion" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="lastPurchaseDate" class="form-label">Last Purchase Date</label>
          <input type="date" id="lastPurchaseDate" class="form-control" name="lastPurchaseDate" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="invoiceNumber" class="form-label">Invoice Number</label>
          <input type="text" id="invoiceNumber" class="form-control" name="invoiceNumber" ngModel />
        </div>
        <div class="mb-3 col-md-6">
          <label for="invoiceAmount" class="form-label">Invoice Amount</label>
          <input type="number" step="0.01" id="invoiceAmount" class="form-control" name="invoiceAmount" ngModel />
        </div>
        <button type="submit" class="btn btn-success">Add</button>
      </form>
    </div>
  </ng-template>
